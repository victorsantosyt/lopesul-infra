(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6949],{1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:n,className:d="",children:c,iconNode:h,...x}=e;return(0,a.createElement)("svg",{ref:t,...l,width:s,height:s,stroke:r,strokeWidth:n?24*Number(o)/Number(s):o,className:i("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(x)&&{"aria-hidden":"true"},...x},[...h.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),n=(e,t)=>{let r=(0,a.forwardRef)((r,l)=>{let{className:n,...d}=r;return(0,a.createElement)(o,{ref:l,iconNode:t,className:i("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),n),...d})});return r.displayName=s(e),r}},2464:(e,t,r)=>{Promise.resolve().then(r.bind(r,4279))},3166:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]])},4279:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(5155),s=r(2115),i=r(3166);let l=(0,r(1847).A)("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);function o(){var e,t,r,o,n,d,c;let[h,x]=(0,s.useState)([]),[u,m]=(0,s.useState)(!0),[g,k]=(0,s.useState)(""),[p,v]=(0,s.useState)(null),[y,f]=(0,s.useState)(!1),[b,j]=(0,s.useState)("");async function N(){try{var e;k(""),m(!0);let t=await fetch("/api/dispositivos",{cache:"no-store"});if(!t.ok)throw Error("Falha ao buscar dispositivos");let r=await t.json();x(Array.isArray(r)?r:null!=(e=r.items)?e:[])}catch(e){console.error("Erro ao carregar dispositivos:",e),k("N\xe3o foi poss\xedvel carregar os dispositivos. Verifique sua conex\xe3o ou o backend."),x([])}finally{m(!1)}}async function w(){try{j(""),f(!0);let e=await fetch("/api/dispositivos/status",{cache:"no-store"}),t=await e.json().catch(()=>({}));if(!e.ok)throw Error((null==t?void 0:t.error)||"HTTP ".concat(e.status));v(t)}catch(e){console.error("Erro status dispositivos:",e),v(null),j("N\xe3o foi poss\xedvel obter o status t\xe9cnico agora.")}finally{f(!1)}}return(0,s.useEffect)(()=>{N()},[]),(0,a.jsxs)("div",{className:"p-6 md:p-8 bg-[#F0F6FA] dark:bg-[#1a2233] min-h-screen transition-colors",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3 mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"Painel T\xe9cnico — Dispositivos"}),(0,a.jsxs)("button",{onClick:w,disabled:y,className:"inline-flex items-center gap-2 rounded-lg px-3 py-2 bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-60 focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":"Obter Status",title:"Obter Status (Mikrotik/Starlink)",children:[(0,a.jsx)(i.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:y?"Carregando…":"Ver Status"})]})]}),y&&(0,a.jsx)("div",{className:"mb-4 text-sm text-gray-600 dark:text-gray-300",children:"Consultando status…"}),b&&(0,a.jsx)("div",{className:"mb-4 text-sm text-red-600 dark:text-red-400",children:b}),p&&(0,a.jsxs)("div",{className:"mb-6 p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-[#232e47]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-800 dark:text-white",children:"Status T\xe9cnico"}),(0,a.jsxs)("button",{onClick:w,className:"inline-flex items-center gap-2 text-sm px-2 py-1 rounded-lg bg-gray-100 dark:bg-[#2b3754] hover:bg-gray-200 dark:hover:bg-[#314066]",title:"Atualizar",children:[(0,a.jsx)(l,{className:"h-4 w-4"})," Atualizar"]})]}),(0,a.jsxs)("div",{className:"grid sm:grid-cols-2 gap-3 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500 dark:text-gray-300",children:"Mikrotik"}),(0,a.jsxs)("div",{className:"text-gray-800 dark:text-gray-100",children:[(null==p||null==(e=p.mikrotik)?void 0:e.online)?"online":"offline",(null==p||null==(t=p.mikrotik)?void 0:t.lastHost)?" — host: ".concat(p.mikrotik.lastHost):"",(null==p||null==(r=p.mikrotik)?void 0:r.port)?" (porta ".concat(p.mikrotik.port,")"):""]}),(null==p||null==(o=p.mikrotik)?void 0:o.via)&&(0,a.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:["via: ",p.mikrotik.via]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-gray-500 dark:text-gray-300",children:"Starlink"}),(0,a.jsxs)("div",{className:"text-gray-800 dark:text-gray-100",children:[(null==p||null==(n=p.starlink)?void 0:n.online)?"online":"offline",(null==p||null==(d=p.starlink)?void 0:d.lastHost)?" — host: ".concat(p.starlink.lastHost):""]}),(null==p||null==(c=p.starlink)?void 0:c.via)&&(0,a.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:["via: ",p.starlink.via]})]})]})]}),(0,a.jsx)("h2",{className:"text-xl font-semibold mt-2 mb-3 text-gray-800 dark:text-white",children:"Dispositivos Cadastrados"}),u&&(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Carregando dispositivos..."}),!!g&&(0,a.jsx)("p",{className:"text-red-600 dark:text-red-400 mb-3",children:g}),!u&&!g&&(0,a.jsx)(a.Fragment,{children:0===h.length?(0,a.jsx)("p",{className:"text-gray-400 dark:text-gray-500",children:"Nenhum dispositivo cadastrado no momento."}):(0,a.jsx)("ul",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:h.map(e=>{var t,r;return(0,a.jsx)("li",{className:"bg-white dark:bg-[#232e47] p-4 border border-gray-200 dark:border-gray-700 rounded-xl shadow transition-all hover:shadow-lg",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("p",{className:"text-gray-800 dark:text-gray-100",children:[(0,a.jsx)("strong",{children:"IP:"})," ",null!=(r=e.ip)?r:"—"]}),(0,a.jsxs)("p",{className:"text-gray-800 dark:text-gray-100",children:[(0,a.jsx)("strong",{children:"Frota:"})," ",(null==(t=e.frota)?void 0:t.nome)||e.frotaId||"Sem frota"]}),(0,a.jsxs)("p",{className:"text-gray-500 dark:text-gray-300 text-sm",children:[(0,a.jsx)("strong",{children:"Criado em:"})," ",e.criadoEm?new Date(e.criadoEm).toLocaleString("pt-BR"):"-"]})]})},e.id)})})})]})}}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=2464)),_N_E=e.O()}]);