(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[119],{1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:d="",children:c,iconNode:u,...x}=e;return(0,a.createElement)("svg",{ref:t,...n,width:s,height:s,stroke:r,strokeWidth:i?24*Number(o)/Number(s):o,className:l("lucide",d),...!c&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(x)&&{"aria-hidden":"true"},...x},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),i=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:i,...d}=r;return(0,a.createElement)(o,{ref:n,iconNode:t,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...d})});return r.displayName=s(e),r}},3220:(e,t,r)=>{Promise.resolve().then(r.bind(r,4774))},4774:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(5155),s=r(2115),l=r(9470);let n="/api/operadores";function o(){let[e,t]=(0,s.useState)([]),[r,o]=(0,s.useState)(""),[i,d]=(0,s.useState)(""),[c,u]=(0,s.useState)(!0),[x,h]=(0,s.useState)(!1),[m,g]=(0,s.useState)(null),[p,f]=(0,s.useState)(!1),[b,y]=(0,s.useState)(!1),k=(0,s.useRef)(null),j=(0,s.useRef)(null),N=(0,s.useRef)(null),v=(null!=r?r:"").toString(),w=(null!=i?i:"").toString(),C=(0,s.useMemo)(()=>!p&&(x?v.trim().length>0:v.trim().length>0&&w.trim().length>0),[p,x,v,w]);async function E(){try{y(!0);let e=await fetch(n,{cache:"no-store"});if(!e.ok)throw Error("Falha ao listar operadores");let r=await e.json();t(Array.isArray(r)?r:[])}catch(e){console.error(e),alert("Erro ao carregar operadores.")}finally{y(!1)}}async function S(){let e=v.trim(),t=w.trim();if(e&&t){f(!0);try{if(!(await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usuario:e,senha:t,ativo:c})})).ok)throw Error("Erro ao cadastrar operador");_(),E()}catch(e){alert(e.message)}finally{f(!1)}}}async function A(){let e=v.trim();if(e&&m){f(!0);try{let t={usuario:e};if(w.trim()&&(t.senha=w.trim()),t.ativo=c,!(await fetch("".concat(n,"/").concat(m),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok)throw Error("Erro ao salvar altera\xe7\xf5es");O(),E()}catch(e){alert(e.message)}finally{f(!1)}}}async function F(e){if(confirm("Deseja excluir este operador?"))try{if(!(await fetch("".concat(n,"/").concat(e),{method:"DELETE"})).ok)throw Error("Erro ao excluir operador");E()}catch(e){alert(e.message)}}function O(){h(!1),g(null),_()}function _(){o(""),d(""),u(!0)}return(0,s.useEffect)(()=>{E()},[]),(0,a.jsxs)("div",{className:" min-h-screen rounded-xl shadow-sm p-6 md:p-8 bg-[#F8FAFC] dark:bg-[#1a2233] transition-colors duration-300 ",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-8",children:[(0,a.jsx)("div",{className:"p-2 rounded-xl bg-blue-100 dark:bg-blue-900/40",children:(0,a.jsx)(l.A,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Operadores"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gerencie os operadores com acesso ao sistema Lopesul Wi-Fi."})]})]}),(0,a.jsxs)("form",{ref:k,onSubmit:function(e){e.preventDefault(),C&&(x?A():S())},className:" flex flex-col md:flex-row md:items-end gap-4 mb-8 bg-[#F8FAFC] dark:bg-[#273449] border border-slate-700 rounded-2xl shadow-md p-5 ",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-1 flex-1",children:[(0,a.jsx)("label",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Nome"}),(0,a.jsx)("input",{ref:j,type:"text",placeholder:"Nome do operador",value:r,onChange:e=>o(e.target.value),className:" px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-[#1e293b] text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-600 outline-none transition-all "})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-1 flex-1",children:[(0,a.jsx)("label",{className:"text-xs text-gray-600 dark:text-gray-400",children:x?"Nova senha (opcional)":"Senha"}),(0,a.jsx)("input",{ref:N,type:"password",placeholder:x?"Nova senha (opcional)":"Senha",value:i,onChange:e=>d(e.target.value),className:" px-4 py-2 rounded-lg border border-slate-300 dark:border-slate-700 bg-white dark:bg-[#1e293b] text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-600 outline-none transition-all "})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-800 dark:text-gray-200 select-none",children:[(0,a.jsx)("input",{type:"checkbox",checked:c,onChange:e=>u(e.target.checked),className:"accent-blue-600 w-4 h-4"}),"Ativo"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{type:"submit",disabled:!C||p,className:" px-6 py-2.5 rounded-md font-semibold text-white bg-blue-600 hover:bg-blue-700 active:bg-blue-700 shadow-md hover:shadow-lg active:shadow-inner transition-all duration-200 ease-in-out focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 dark:focus:ring-blue-700 ",children:p?"Aguarde...":x?"Salvar":"Cadastrar"}),x&&(0,a.jsx)("button",{type:"button",onClick:O,disabled:p,className:" px-5 py-2.5 rounded-lg font-medium text-white bg-gray-600 hover:bg-gray-700 transition-all shadow-sm ",children:"Cancelar"})]})]}),(0,a.jsx)("div",{className:" overflow-x-auto bg-[#F8FAFC] dark:bg-[#1E293B] border border-slate-700 rounded-2xl shadow-md ",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left text-gray-800 dark:text-gray-200",children:[(0,a.jsx)("thead",{className:"bg-[#273449] text-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"p-3 font-semibold",children:"Nome"}),(0,a.jsx)("th",{className:"p-3 font-semibold text-center",children:"Status"}),(0,a.jsx)("th",{className:"p-3 font-semibold text-center w-56",children:"A\xe7\xf5es"})]})}),(0,a.jsx)("tbody",{children:b?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"p-4 text-center text-gray-500",children:"Carregando..."})}):0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:3,className:"p-4 text-center text-gray-500",children:"Nenhum operador cadastrado."})}):e.map(e=>{var t;return(0,a.jsxs)("tr",{className:" border-t border-slate-300 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-[#141c2e] transition-colors ",children:[(0,a.jsx)("td",{className:"p-3",children:null!=(t=e.usuario)?t:e.nome}),(0,a.jsx)("td",{className:"p-3 text-center",children:e.ativo?(0,a.jsxs)("span",{className:"inline-flex items-center gap-2 px-2 py-1 bg-green-100 dark:bg-green-900/40 text-green-600 dark:text-green-400 rounded-full text-xs font-semibold",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),"Ativo"]}):(0,a.jsxs)("span",{className:"inline-flex items-center gap-2 px-2 py-1 bg-slate-200 dark:bg-slate-800 text-slate-600 dark:text-slate-400 rounded-full text-xs font-semibold",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-slate-500 rounded-full"}),"Inativo"]})}),(0,a.jsx)("td",{className:"p-3 text-center",children:(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{var t,r,a;o(null!=(r=null!=(t=e.usuario)?t:e.nome)?r:""),d(""),u(null==(a=e.ativo)||a),g(e.id),h(!0),setTimeout(()=>{var e;return null==(e=j.current)?void 0:e.focus()},0)},className:"bg-yellow-500 hover:bg-yellow-600 text-white px-3 py-1 rounded-md text-xs font-semibold transition-all",children:"Editar"}),(0,a.jsx)("button",{onClick:()=>F(e.id),className:"bg-red-600 hover:bg-red-700 text-white px-3 py-1 rounded-md text-xs font-semibold transition-all",children:"Excluir"})]})})]},e.id)})})]})})]})}},9470:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(1847).A)("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])}},e=>{e.O(0,[8441,1255,7358],()=>e(e.s=3220)),_N_E=e.O()}]);